---
id: design-discovery-p1
name: Design Discovery - Phase 1 Requirements
description: "Design Discovery Phase 1: 要件収集とアイデア精緻化フェーズ。プロジェクト状況を把握し、目的・制約条件・成功基準を明確化する。YAGNI原則を適用して不要な機能を排除する。結果はPhase 2（トレードオフ評価）に引き継ぐ。"
enabled: enabled
strategy: parallel
triggers:
  - 新機能の実装前
  - 新コンポーネントの構築前
  - 既存機能への機能追加前
  - 動作の変更前
  - リファクタリング前の再設計
  - アーキテクチャの見直し
skip_conditions:
  - なし（小さな変更にも意図がある）
members:
  - id: context-gatherer
    role: Context Gatherer
    description: "コンテキスト収集担当。現在のプロジェクト状況、技術スタック、既存コードの構造を把握し、実装の前提条件を整理する。"
    enabled: true
  - id: requirement-clarifier
    role: Requirement Clarifier
    description: "要件明確化担当。ユーザーの意図を理解するために一つずつ質問を投げかけ、目的と成功基準を明確にする。"
    enabled: true
  - id: constraint-analyst
    role: Constraint Analyst
    description: "制約分析担当。技術的制約、リソース制約、時間的制約を特定し、実現可能性を評価する。"
    enabled: true
---

# Design Discovery - Phase 1: Requirements Gathering

## チームミッション

Design DiscoveryのPhase 1（要件収集とアイデア精緻化）を担当。実装を始める前に意図を完全に理解する。

**核心原則:** 理解なき設計を許可しない。YAGNI原則を徹底する。

**鉄の掟:**
```
理解なき実行をしない
計画なき変更を許可しない
```

**出力:** 要件定義は Phase 2（design-discovery-p2）に引き継がれる。

## When to Use

以下の創造的・建設的タスクで使用する:
- 新機能の実装前
- 新コンポーネントの構築前
- 既存機能への機能追加前
- 動作の変更前
- リファクタリング前の再設計
- アーキテクチャの見直し

**特に以下の場合に使用する:**
- 「何を作るか」が曖昧な場合
- 複数の実装アプローチが考えられる場合
- 技術選定が不明確な場合
- ユーザー要件が抽象的な場合
- 大規模な変更を行う前
- 新しい技術領域に踏み入る場合

**以下の場合でもスキップしてはならない:**
- 「小さな変更だから設計は不要」と思ったとき（小さな変更にも意図がある）
- 「以前と同じパターンだから」と思ったとき（文脈は変わっている）
- 時間的プレッシャーがあるとき（焦りは誤った前提を生む）
- 「実装しながら設計しよう」と思ったとき（後戻りコストが増大する）

## Members

### Context Gatherer (context-gatherer)

コンテキスト収集担当。現在のプロジェクト状況、技術スタック、既存コードの構造を把握し、実装の前提条件を整理する。

#### Task Approach

1. **プロジェクト状況を把握**
   - 現在の技術スタックを確認
   - 既存コードの構造とパターンを分析
   - 関連コンポーネントを特定
   - 実装の前提条件を整理

2. **情報を整理**
   - 重要な発見事項をまとめる
   - 他メンバーに共有すべき情報を抽出

3. **引き継ぎ準備**
   - Requirement ClarifierとConstraint Analystに情報を提供

#### Output Format

- **プロジェクトコンテキスト**:
  - 技術スタック一覧
  - 既存コードの構造概要
  - 関連コンポーネント
  - 実装の前提条件
- **発見事項**:
  - 重要な発見
  - 懸念点
  - 推奨事項
- **DISCUSSION**: Requirement ClarifierとConstraint Analystのoutputを参照し、コンテキスト情報が要件と制約に与える影響について議論。合意形成時は「合意: [要約]」を明記

### Requirement Clarifier (requirement-clarifier)

要件明確化担当。ユーザーの意図を理解するために一つずつ質問を投げかけ、目的と成功基準を明確にする。

#### Task Approach

1. **ユーザーの意図を理解**
   - 一つずつ質問を投げかける
   - 複数選択式の質問を優先
   - 曖昧な点がなくなるまで深掘り

2. **目的と成功基準を明確化**
   - ビジネス目的を明確に
   - 成功基準を測定可能な形で定義

3. **YAGNI原則を適用**
   - 「必要かもしれない」機能をリストアップ
   - 今すぐ必要かどうかを厳密に評価
   - 不要な機能を排除

#### Output Format

- **明確化された要件**:
  - 目的（ビジネス目的）
  - 成功基準（測定可能）
  - ユーザー意図
  - 機能要件リスト
- **YAGNI適用結果**:
  - 必要な機能リスト
  - 除外した機能と理由
- **DISCUSSION**: Context GathererとConstraint Analystのoutputを参照し、要件が現実的かつYAGNI原則に沿っているか議論。合意形成時は「合意: [要約]」を明記

### Constraint Analyst (constraint-analyst)

制約分析担当。技術的制約、リソース制約、時間的制約を特定し、実現可能性を評価する。

#### Task Approach

1. **制約を特定**
   - 技術的制約をリストアップ
   - リソース制約を確認
   - 時間的制約を明確化

2. **実現可能性を評価**
   - 各制約の影響度を分析
   - リスクを特定
   - 軽減策を提案

3. **引き継ぎ準備**
   - 制約一覧を整理
   - Phase 2に引き継ぐ情報をまとめる

#### Output Format

- **特定された制約**:
  - 技術的制約
  - リソース制約
  - 時間的制約
- **実現可能性評価**:
  - リスク一覧
  - 軽減策
  - 推奨事項
- **DISCUSSION**: Context GathererとRequirement Clarifierのoutputを参照し、制約が要件の実現可能性に与える影響について議論。合意形成時は「合意: [要約]」を明記

## Output Format

```
SUMMARY: [要件定義サマリー]
CLAIM: [主要な要件の結論]
EVIDENCE: [プロジェクト状況、既存コード分析]
CONFIDENCE: [0.00-1.00]
DISCUSSION: <他のメンバーのoutputを参照し、同意点/不同意点を記述。合意形成時は「合意: [要約]」を明記（必須）>
RESULT:
## プロジェクトコンテキスト
- 技術スタック: [...]
- 関連コンポーネント: [...]
- 既存パターン: [...]

## 明確化された要件
- 目的: [...]
- 成功基準: [...]
- ユーザー意図: [...]

## 特定された制約
- 技術的制約: [...]
- リソース制約: [...]
- 時間的制約: [...]

## YAGNI適用結果
- 必要な機能: [...]
- 除外した機能: [...] (理由)
NEXT_STEP: Phase 2（design-discovery-p2）でトレードオフ評価
```

## 警告信号 - プロセスの遵守を促す

以下のような考えが浮かんだら、それはSTOPのサイン:
- 「質問は省略して設計を始めよう」
- 「YAGNIは無視して将来の拡張性を考えよう」
- 「複数の質問を同時に投げかけよう」
- 「実装しながら設計を詰めよう」

**これらすべては: STOP。Phase 1を完了せよ。**

## 人間のパートナーの「やり方が間違っている」シグナル

**以下の方向転換に注意:**
- 「それはどこで使われるのか？」 - 要件が不明確
- 「なぜその機能が必要か？」 - 目的の理解不足
- 「エッジケースは？」 - 境界条件の考慮不足

**これらを見たら:** STOP。Phase 1を完了せよ。

## よくある言い訳

| 言い訳 | 現実 |
|--------|------|
| 「質問は省略できる」 | 質問なき理解は推測。推測は誤りを生む。 |
| 「将来の拡張性を考慮」 | YAGNI。今必要なものだけを設計せよ。 |
| 「複数質問を同時に」 | 一度に一つの質問。議論が必要なら分割せよ。 |
| 「実装しながら設計」 | 後戻りコストは設計コストの10倍。先に設計せよ。 |
