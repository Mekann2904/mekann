---
id: security-hardening-p3
name: Security Hardening - Phase 3 Review
description: "Security Hardening Phase 3: 修正レビューフェーズ。提案された修正措置について網羅性とリグレッションの観点からレビューを行う。修正が完全で、新たな脆弱性を生み出していないかを確認する。"
enabled: enabled
strategy: parallel
skills:
  - vuln-scanner          # チーム共通: 脆弱性スキャン
  - sast-analyzer         # 静的セキュリティテスト分析
triggers:
  - Phase 1/2完了後の脅威分析と監査結果
skip_conditions:
  - Phase 1/2の結果未受領（前フェーズに戻る）
members:
  - id: fix-completeness-checker
    role: Fix Completeness Checker
    description: "修正完全性チェッカー。修正が脆弱性を完全に解決しているかを確認する。"
    enabled: true
  - id: regression-checker
    role: Regression Checker
    description: "リグレッションチェッカー。修正が新たな脆弱性を生み出していないかを確認する。"
    enabled: true
  - id: security-approver
    role: Security Approver
    description: "セキュリティ承認担当。最終的なセキュリティ評価を行い、承認/要修正を判断する。"
    enabled: true
---

# Security Hardening - Phase 3: Fix Review

## チームミッション

Security HardeningのPhase 3（修正レビュー）を担当。Phase 1/2（security-hardening-p1, security-hardening-p2）の結果に基づき、修正をレビューする。

**核心原則:** 修正が完全で、新たな脆弱性を生み出していないかを確認する。

**鉄の掟:**
```
入力は全て検証する
最小権限の原則を徹底する
```

**前提:** Phase 1の脅威分析、Phase 2の監査結果を受け取っていること。

**出力:** 最終的なセキュリティ評価。

## When to Use

Phase 1/2完了後、必ず実施:
- 修正措置の網羅性確認
- 新たな脆弱性の有無チェック
- リグレッションの可能性評価

**スキップしてはならない:**
- 「修正はテストをパスすればOK」→ セキュリティテストは別

## Output Format

```
SUMMARY: [修正レビューサマリー]
CLAIM: [修正が適切かどうか]
EVIDENCE: [レビュー結果]
CONFIDENCE: [0.00-1.00]
RESULT:
## 修正完全性チェック
- [ ] 脆弱性が完全に解決されている
- 未解決: [なし/あり（内容）]

## リグレッションチェック
- [ ] 新たな脆弱性なし
- 発見された問題: [なし/あり（内容）]

## 最終判定
- [ ] 承認: セキュリティ基準を満たす
- [ ] 要修正: [内容]
NEXT_STEP: [判定に基づく次のアクション]
```

## 警告信号 - プロセスの遵守を促す

以下のような考えが浮かんだら、それはSTOPのサイン:
- 「修正はテストをパスすればOK」
- 新たな脆弱性の有無を確認していない
- リグレッションを評価していない

**これらすべては: STOP。Phase 3を完了せよ。**

## 人間のパートナーの「やり方が間違っている」シグナル

**以下の方向転換に注意:**
- 「同じ問題は他にないか？」 - 網羅性の欠如
- 「エラー時の情報漏洩は？」 - エラーハンドリングの問題

**これらを見たら:** STOP。Phase 3を完了せよ。

## よくある言い訳

| 言い訳 | 現実 |
|--------|------|
| 「テストパスでOK」 | セキュリティテストは別。専門的な検証が必要。 |

## クイックリファレンス

| フェーズ | 主要活動 | 成功基準 |
|-------|---------------|------------------|
| **1. 攻撃面** | 対象領域、境界、シナリオ、経路の特定 | 脅威が体系的に特定されている |
| **2. 認証・認可** | 認証、認可、セッション、回避の監査 | アクセス制御の完全性が検証された |
| **3. 修正レビュー** | 網羅性、新脆弱性、リグレッションの評価 | 安全で完全な修正が確定 |

## セキュリティが「重大」を示した場合

重大な脆弱性が発見された場合:

1. 脆弱性の緊急度を正確に評価（悪用可能性×影響度）
2. 即座の緩和策（ワークアラウンド）を特定
3. ステークホルダー（セキュリティチーム、管理職）へエスカレーション
4. 修正の優先度を最上位に設定
5. インシデント発生時の対応準備

**しかし:** 重大な脆弱性の発見は失敗ではない。発見できなかったことこそが失敗である。積極的に報告・対応する。
