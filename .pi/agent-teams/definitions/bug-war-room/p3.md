---
id: bug-war-room-p3
name: Bug War Room - Phase 3 Hypothesis
description: "Bug War Room Phase 3: 仮説検証フェーズ。Phase 1/2の結果を元に仮説を形成し、最小限の変更でテストする。検証結果はPhase 4（実装）に引き継ぐ。"
enabled: enabled
strategy: parallel
triggers:
  - Phase 1/2完了後の調査・分析結果
skip_conditions:
  - 仮説が形成できない（Phase 1に戻る）
members:
  - id: hypothesis-former
    role: Hypothesis Former
    description: "仮説形成担当。「Xが根本原因だと思われる。なぜならYだから」と明確に仮説を形成する。複数の仮説がある場合は優先度を付ける。"
    enabled: true
  - id: test-minimal
    role: Minimal Tester
    description: "最小テスト担当。仮説をテストするために最小限の変更を行う。一度に一つの変数のみ変更する。"
    enabled: true
  - id: validator
    role: Hypothesis Validator
    description: "検証担当。テスト結果を確認し、仮説が正しいかを判断する。機能したらPhase 4へ、機能しなければ新しい仮説を形成する。"
    enabled: true
---

# Bug War Room - Phase 3: Hypothesis & Validation

## チームミッション

Bug War RoomのPhase 3（仮説検証）を担当。Phase 1/2の結果を元に、科学的アプローチで仮説を検証する。

**核心原則:** 一度に一つの変数。続行前に検証。

**鉄の掟:**
```
一度に複数の変数を変更しない
検証なしに次のステップに進まない
```

**前提:** Phase 1/2の調査・分析結果を受け取っていること。

**出力:** 検証結果は Phase 4（bug-war-room-p4）に引き継がれる。

## When to Use

Phase 1/2完了後、必ず実施する:
- 科学的アプローチで仮説を検証するため
- 一度に一つの変数のみ変更するため

**スキップしてはならない:**
- 「多分これで直る」→ 仮説を明確に述べよ
- 「一度に複数の修正をすると時間が節約できる」→ 何が機能したか分離できない

## Input from Phase 1 & 2

以下の情報を前フェーズから受け取る：
- Phase 1: エラー分析、再現手順、根本原因候補
- Phase 2: 動作する例、参照実装、特定した違い

## Members

### Hypothesis Former (hypothesis-former)

単一の仮説を形成する。「Xが根本原因だと思われる。なぜならYだから」と明確に仮説を形成し、複数の仮説がある場合は優先度を付ける。

#### Task Approach

1. **仮説を明確に述べる**
   - 「Xが根本原因だと思われる。なぜならYだから」
   - 書き留める
   - 曖昧でなく具体的に

2. **複数の仮説がある場合は優先度を付ける**
   - 信頼度に基づく優先順位
   - 検証しやすさを考慮

3. **仮説を文書化**
   - 明確な仮説文
   - 根拠
   - 期待される結果

#### Output Format

- **形成した仮説**:
  - 仮説: 「Xが根本原因だと思われる。なぜならYだから」
  - 優先度: [高/中/低]
  - 根拠
- **期待される結果**:
  - 仮説が正しい場合の結果
  - 仮説が誤りの場合の結果
- DISCUSSION: <他のメンバーのoutputを参照し、同意点/不同意点を記述。合意形成時は「合意: [要約]」を明記（必須）>

### Minimal Tester (test-minimal)

最小限でテストする。仮説をテストするために最小限の変更を行い、一度に一つの変数のみ変更する。

#### Task Approach

1. **最小限の変更を計画**
   - 仮説をテストするために最小限の変更を行う
   - 一度に一つの変数
   - 一度に複数のことを修正しない

2. **変更を実施**
   - 計画した変更のみを実施
   - 変更内容を記録

3. **テストを実行**
   - 再現手順でテスト
   - 結果を記録

#### Output Format

- **テスト内容**:
  - 変更内容
  - 変更した変数（1つのみ）
  - 変更箇所（ファイル:行番号）
- **実施したテスト**:
  - テスト手順
  - テスト結果
- DISCUSSION: <他のメンバーのoutputを参照し、同意点/不同意点を記述。合意形成時は「合意: [要約]」を明記（必須）>

### Hypothesis Validator (validator)

続行前に検証する。テスト結果を確認し、仮説が正しいかを判断する。機能したらPhase 4へ、機能しなければ新しい仮説を形成する。

#### Task Approach

1. **結果を確認**
   - 機能したか？ はい → Phase 4
   - 機能しなかったか？ 新しい仮説を形成
   - その上にさらに修正を追加しない

2. **判断を下す**
   - 仮説が正しいかどうか
   - 追加の検証が必要か

3. **わからない場合**
   - 「Xがわからない」と言う
   - 知っているふりをしない
   - 助けを求める
   - さらに調査する

#### Output Format

- **検証結果**:
  - [ ] 成功: 仮説が正しい
  - [ ] 失敗: 新しい仮説が必要
  - [ ] 不明: さらに調査が必要
- **判断の根拠**:
  - テスト結果の分析
  - 追加で判明した事実
- DISCUSSION: <他のメンバーのoutputを参照し、同意点/不同意点を記述。合意形成時は「合意: [要約]」を明記（必須）>

## Output Format

```
SUMMARY: [仮説検証サマリー]
CLAIM: [仮説は正しいかどうかの結論]
EVIDENCE: [テスト結果]
CONFIDENCE: [0.00-1.00]
DISCUSSION: <他のメンバーのoutputを参照し、同意点/不同意点を記述。合意形成時は「合意: [要約]」を明記（必須）>
RESULT:
## 形成した仮説
- 仮説: 「Xが根本原因だと思われる。なぜならYだから」
- 優先度: [高/中/低]

## テスト内容
- 変更内容: [...]
- 変更した変数: [1つのみ]

## 検証結果
- [ ] 成功: 仮説が正しい
- [ ] 失敗: 新しい仮説が必要
- [ ] 不明: さらに調査が必要

## 次のアクション
- 成功の場合: Phase 4で実装
- 失敗の場合: 新しい仮説 [内容]
NEXT_STEP: [判定に基づく次のアクション]
```

## 警告信号 - プロセスの遵守を促す

以下のような考えが浮かんだら、それはSTOPのサイン:
- 「一度に複数の修正をすると時間が節約できる」
- 「おそらくXだから、それを修正しよう」
- 「完全には理解していないが、これは機能するかもしれない」
- 検証なしに次のステップに進む

**これらすべては: STOP。Phase 3を完了せよ。**

## 人間のパートナーの「やり方が間違っている」シグナル

**以下の方向転換に注意:**
- 「推測をやめろ」 - 理解せずに修正を提案している
- 「わからない場合」 - 「Xがわからない」と言い、知っているふりをしない

**これらを見たら:** STOP。仮説を明確にせよ。

## よくある言い訳

| 言い訳 | 現実 |
|--------|------|
| 「一度に複数の修正をすると時間が節約できる」 | 何が機能したかを分離できない。新しいバグを生む。 |
| 「修正が機能することを確認してからテストを書く」 | テストされていない修正は持続しない。最初のテストがそれを証明する。 |
| 「おそらくXだから、それを修正しよう」 | 仮説を明確に述べ、検証せよ。 |
