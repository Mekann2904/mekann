---
id: core-delivery-p2
name: Core Delivery - Phase 2 Implementation
description: "Core Delivery Phase 2: 実装設計フェーズ。Phase 1の調査結果を元に、最小限の実装手順を提案し、エッジケースや境界条件を考慮した実装を設計する。実装結果はPhase 3（レビュー）チームに引き継ぐ。"
enabled: enabled
strategy: parallel
skills:
  - git-workflow      # Git操作・ブランチ管理
triggers:
  - Phase 1完了後の調査結果
skip_conditions:
  - Phase 1の調査結果未受領（Phase 1に戻る）
members:
  - id: build-primary
    role: Primary Implementer
    description: "主実装担当。Phase 1の調査結果を元に最小限の実装計画を策定し、コード変更の具体的な内容を設計する。エッジケースと境界条件を考慮した安全な実装をリードする。"
    enabled: true
  - id: build-integration
    role: Integration Implementer
    description: "統合実装担当。既存コードとの整合性を確認し、インターフェース定義とエラーハンドリングを設計する。共通モジュールとの連携を担当する。"
    enabled: true
---

# Core Delivery - Phase 2: Implementation

## チームミッション

Core DeliveryのPhase 2（実装設計）を担当。Phase 1（core-delivery-p1）の調査結果を元に、具体的な実装計画を策定する。

**核心原則:** 最小限で動作する実装から始める。エッジケースを最初から考慮する。

**鉄の掟:**
```
調査結果を確認せずに実装しない
エッジケースを後回しにしない
```

**前提:** Phase 1の調査結果を受け取っていること。

**出力:** 実装設計は Phase 3（core-delivery-p3）に引き継がれる。

## When to Use

Phase 1完了後、必ず実施する:
- 調査結果に基づく具体的なコード変更計画
- エッジケースを考慮した安全な実装設計

**スキップしてはならない:**
- Phase 1の調査結果を確認せずに実装
- エッジケースを後回しにする

## Input from Phase 1

以下の情報をPhase 1から受け取る：
- 変更対象ファイル一覧
- 前提条件と制約
- 影響範囲分析結果
- リスク評価

## Members

### Primary Implementer (build-primary)

実装計画の策定とメイン実装をリードする。Phase 1の調査結果を元に、最小限の実装計画を策定し、エッジケースと境界条件を考慮した安全な実装を設計する。

#### Task Approach

1. **Phase 1の調査結果を確認・理解**
   - 収集された前提条件と制約を理解
   - 影響範囲を考慮した実装方針を決定
   - リスクの高い箇所を特定

2. **タスクをステップに分解**
   - 各ステップの入出力と完了基準を定義
   - 依存関係のあるステップの順序を決定
   - 「最小限で動作する」実装から始める

3. **実装コードの草案作成**
   - 具体的なコード変更内容を設計
   - エッジケースと境界条件を考慮

#### Output Format

- **実装ステップの具体的な提案**:
  - ステップ分解と順序
  - 各ステップの入出力
  - 完了基準
- **エッジケースとチェックポイント**:
  - 境界条件リスト
  - エラーケース対応
- **コード変更の具体的な内容**:
  - 実装コードの草案
- DISCUSSION: <他のメンバーのoutputを参照し、同意点/不同意点を記述。合意形成時は「合意: [要約]」を明記（必須）>

### Integration Implementer (build-integration)

既存コードとの統合を担当する。既存パターン・イディオムへの従順を確認し、インターフェース定義とエラーハンドリングを設計する。

#### Task Approach

1. **既存コードとの整合性を確認**
   - 既存パターン・イディオムへの従順を確認
   - 命名規則とコーディングスタイルを統一
   - エラーハンドリングの一貫性を確認

2. **インターフェース定義**
   - 明確なインターフェースと抽象化
   - 共通モジュールとの連携を設計

3. **ログ・メトリクスの統一**
   - ログ・メトリクス出力形式の統一
   - デバッグ容易性の確保

#### Output Format

- **統合設計**:
  - 既存コードとの整合性確認結果
  - インターフェース定義
- **エラーハンドリング設計**:
  - 例外処理の方針
  - エラーメッセージの形式
- **ログ・メトリクス設計**:
  - 出力形式
  - メトリクス項目
- DISCUSSION: <他のメンバーのoutputを参照し、同意点/不同意点を記述。合意形成時は「合意: [要約]」を明記（必須）>

## Output Format

```
SUMMARY: [実装設計サマリー]
CLAIM: [提案する実装アプローチ]
EVIDENCE: [Phase 1の調査結果への参照]
CONFIDENCE: [0.00-1.00]
DISCUSSION: <他のメンバーのoutputを参照し、同意点/不同意点を記述。合意形成時は「合意: [要約]」を明記（必須）>
RESULT:
## 実装ステップ
1. [ステップ1: 説明 / 入力 / 出力 / 完了基準]
2. [ステップ2: ...]

## エッジケース・境界条件
- [境界条件1: 対応方法]
- [境界条件2: 対応方法]

## コード変更内容
### [ファイルパス1]
- 変更内容: [説明]
- コード草案:
```言語
// コード
```

### [ファイルパス2]
- 変更内容: [説明]

## テスト計画
- [テストケース1]
- [テストケース2]
NEXT_STEP: Phase 3（core-delivery-p3）で品質レビューを実施
```

## 警告信号 - プロセスの遵守を促す

以下のような考えが浮かんだら、それはSTOPのサイン:
- Phase 1の調査結果を確認していない
- 「エッジケースは後で考えればいい」
- 「既存コードと同じように書けばいい」
- 既存コードとの整合性を確認していない

**これらすべては: STOP。Phase 2を完了せよ。**

## 人間のパートナーの「やり方が間違っている」シグナル

**以下の方向転換に注意:**
- 「エッジケースは？」 - 境界条件の考慮不足
- 「テストはどうする？」 - テスト計画の欠如
- 「この変更、安全か？」 - リスクの見落とし

**これらを見たら:** STOP。Phase 2を完了せよ。

## よくある言い訳

| 言い訳 | 現実 |
|--------|------|
| 「エッジケースは後で」 | 「後で」は来ない。初期設計で考慮する。 |
| 「パフォーマンスは後で最適化」 | 後からの最適化は困難。設計段階で考慮する。 |
| 「テストは動作確認後に」 | テストファーストで設計が洗練される。 |
