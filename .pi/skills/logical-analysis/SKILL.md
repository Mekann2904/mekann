---
name: logical-analysis
description: 論理的テキスト分析スキル。構造・概念・論証の3軸分析フレームワークに基づき、学術論文、技術文書、仕様書、契約書、ビジネス文書など幅広いテキストを体系的に分析。論理的整合性、概念的明確性、論証の妥当性を評価。
license: MIT
metadata:
  skill-version: "1.0.0"
  created-by: pi-skill-system
  applicability:
    - academic-papers
    - technical-documents
    - specifications
    - contracts
    - business-documents
    - policy-documents
    - legal-texts
---

# Logical Analysis

論理的テキスト分析を支援する汎用スキル。あらゆる種類のテキストの**構造**、**概念**、**論証**を体系的に分析し、論理的整合性、概念的明確性、論証の妥当性を評価する。

---

## 目次

1. [概要](#概要)
2. [3軸分析フレームワーク](#3軸分析フレームワーク)
3. [構造分析](#構造分析)
4. [概念分析](#概念分析)
5. [論証評価](#論証評価)
6. [統合的解釈](#統合的解釈)
7. [文書タイプ別ガイド](#文書タイプ別ガイド)
8. [分析テンプレート](#分析テンプレート)
9. [参考文献](#参考文献)

---

## 概要

### このスキルの目的

あらゆるテキストを論理的に分析し、以下を明らかにする：

1. **構造**: テキスト全体の構成と要素間の関係
2. **概念**: 使用される概念の定義と階層
3. **論証**: 主張を支える推論の妥当性

### 適用範囲

| 文書タイプ | 主な分析焦点 | 典型的な課題 |
|-----------|-------------|-------------|
| **学術論文** | 論証の厳密性、概念の定義 | 曖昧な用語、飛躍した推論 |
| **技術文書** | 構造の明確さ、手順の論理性 | 暗黙の前提、不完全な仕様 |
| **仕様書** | 要件の完全性、矛盾の検出 | 曖昧な要件、論理的矛盾 |
| **契約書** | 条項間の整合性、解釈の一意性 | 曖昧な表現、矛盾する条項 |
| **ビジネス文書** | 主張の根拠、論理的流れ | 根拠不足、非論理的な構成 |
| **政策文書** | 目的と手段の論理的関係 | 因果関係の誤認、前提の問題 |
| **法令** | 構成の体系性、概念の明確性 | 解釈の余地、条文間の関係 |

### 分析の原則

```
1. 構造を尊重する
   - テキストの構成（章・節・項）は意図的である
   - 構造は論理的関係を反映している

2. 文脈で解釈する
   - 語句の意味は文脈で決まる
   - 周辺の記述との関係を確認する

3. 暗黙の前提を明示化する
   - 明示されていない前提を特定する
   - 前提の妥当性を評価する

4. 一貫性を検証する
   - 内部矛盾を検出する
   - 概念の一貫した使用を確認する

5. 曖昧性を特定する
   - 複数の解釈が可能な箇所を特定する
   - 解釈の範囲を明確化する
```

---

## 3軸分析フレームワーク

### フレームワーク概要

```
                    ┌─────────────────────┐
                    │    テキスト         │
                    └──────────┬──────────┘
                               │
          ┌────────────────────┼────────────────────┐
          │                    │                    │
          ▼                    ▼                    ▼
    ┌───────────┐        ┌───────────┐        ┌───────────┐
    │  構造分析  │        │  概念分析  │        │  論証評価  │
    │           │        │           │        │           │
    │ ・全体構成 │        │ ・定義抽出 │        │ ・前提特定 │
    │ ・階層関係 │        │ ・階層構築 │        │ ・推論評価 │
    │ ・依存関係 │        │ ・関係分析 │        │ ・妥当性   │
    │ ・流れ     │        │ ・一貫性   │        │ ・反論     │
    └─────┬─────┘        └─────┬─────┘        └─────┬─────┘
          │                    │                    │
          └────────────────────┼────────────────────┘
                               │
                               ▼
                    ┌─────────────────────┐
                    │   統合的解釈        │
                    │                     │
                    │ ・一貫性確認        │
                    │ ・核心的主張        │
                    │ ・限界と課題        │
                    └─────────────────────┘
```

### 各軸の役割

| 軸 | 質問 | 出力 |
|----|------|------|
| **構造** | テキストはどのように構成されているか？ | 構造図、依存マップ |
| **概念** | どのような概念が使われているか？ | 概念階層、定義一覧 |
| **論証** | 主張はどのように支持されているか？ | 論証図、妥当性評価 |

---

## 構造分析

### 目的

テキスト全体の構成を把握し、要素間の論理的関係を明らかにする。

### 分析手順

#### Step 1: 全体構成の把握

1. **主要セクションの特定**
   - 章・節・項の区切り
   - 各セクションの主題
   - セクション間の関係

2. **構成パターンの識別**
   - 時系列構成
   - 論理的構成（前提→展開→結論）
   - 階層構成（一般→特殊）
   - 比較構成（対比・並列）

#### Step 2: 階層構造の可視化

```
ドキュメント構造ツリー
=======================

1. 導入
├── 1.1 背景と動機
├── 1.2 目的と範囲
│   ├── 1.2.1 対象領域
│   └── 1.2.2 除外事項
└── 1.3 構成概要

2. 本論
├── 2.1 理論的基盤
│   ├── 2.1.1 基本概念
│   └── 2.1.2 既存研究
├── 2.2 提案手法
│   ├── 2.2.1 アプローチ
│   ├── 2.2.2 実装
│   └── 2.2.3 検証
└── 2.3 考察

3. 結論
├── 3.1 成果の要約
└── 3.2 今後の課題
```

#### Step 3: 依存関係の分析

```
依存関係マップ
==============

[導入] ──提供──> [本論]
  │                │
  │                ├──前提──> [2.1 理論的基盤]
  │                │              │
  │                │              └──基盤──> [2.2 提案手法]
  │                │                              │
  │                │                              └──根拠──> [2.3 考察]
  │                │
  │                └──帰結──> [結論]
  │
  └──予告────────────────────────────────────────> [結論]
```

#### Step 4: 論理の流れ

```
論理フロー
==========

┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  問提起  │───>│  分析    │───>│  展開    │───>│  結論    │
│          │    │          │    │          │    │          │
│ 何が     │    │ どう     │    │ そして   │    │ したがっ │
│ 問題か   │    │ 考えるか │    │ どうなる │    │ て何か   │
└──────────┘    └──────────┘    └──────────┘    └──────────┘
```

### 出力テンプレート

```markdown
## 構造分析

### 全体構成
[テキスト全体の構成の概要]

### 構造ツリー
```
[ASCIIツリーまたはMermaid図]
```

### 依存関係
[セクション・要素間の依存関係]

### 論理の流れ
[全体の論理的流れの要約]

### 構造的特徴
[構造の特徴と意図]
```

---

## 概念分析

### 目的

テキストで使用される概念の定義と使用を明確化し、概念体系を構築する。

### 分析手順

#### Step 1: 概念の抽出

**概念抽出のパターン:**

| パターン | 表現 | 例 |
|----------|------|-----|
| **明示的定義** | 「AとはBである」「AはBと定義される」 | 「APIとは、アプリケーションプログラミングインターフェースの略である」 |
| **機能的定義** | 「Aは〜するものである」「Aの役割は〜である」 | 「認証システムは、ユーザーの身元を確認する」 |
| **構成的定義** | 「AはBとCからなる」「A = B + C」 | 「システムは、フロントエンドとバックエンドから構成される」 |
| **関係的定義** | 「AはBの一種である」「AはBに関連する」 | 「JWTはトークンの一種である」 |

**暗黙的定義の特定:**
- 使用例から定義を推測
- 文脈から意味を特定
- 他の概念との関係から位置づけ

#### Step 2: 概念階層の構築

```
概念階層図
==========

                    [システム]
                        │
           ┌────────────┼────────────┐
           │            │            │
      [フロントエンド] [バックエンド] [データベース]
           │            │            │
      ┌────┴────┐  ┌────┴────┐       │
      │         │  │         │       │
   [UI]    [状態管理] [API] [ビジネスロジック]
                                │
                           ┌────┴────┐
                           │         │
                       [認証]    [承認]
```

#### Step 3: 概念間関係の分析

**関係のタイプ:**

| 関係 | 記号 | 説明 | 例 |
|------|------|------|-----|
| **汎化** | A ⊃ B | BはAの一種 | 動物 ⊃ 犬 |
| **特化** | A ⊂ B | AはBの一種 | 犬 ⊂ 動物 |
| **構成** | A = B + C | AはBとCからなる | 車 = エンジン + 車体 |
| **関連** | A ↔ B | AとBは関連する | ユーザー ↔ 注文 |
| **依存** | A → B | AはBに依存する | 子コンポーネント → 親コンポーネント |
| **排他** | A ∥ B | AとBは排他 | 有効 ∥ 無効 |

**関係マトリックス:**

|       | A | B | C | D |
|-------|---|---|---|---|
| **A** | = | ⊃ | → | ↔ |
| **B** | ⊂ | = | → | ↔ |
| **C** | ← | ← | = | ∥ |
| **D** | ↔ | ↔ | ∥ | = |

#### Step 4: 一貫性チェック

```
一貫性チェック項目
==================

□ 定義の一貫性
  - 同じ概念が異なる定義で使われていないか
  - 定義が文脈によって変わっていないか

□ 使用の一貫性
  - 概念が一貫した意味で使われているか
  - 類似概念と混同されていないか

□ 階層の一貫性
  - 汎化・特化の関係が正しいか
  - 循環参照がないか

□ 関係の一貫性
  - 関係が対称的に正しいか（A→B のとき B←A）
  - 排他関係が正しいか
```

### 出力テンプレート

```markdown
## 概念分析

### 主要概念一覧

| 概念 | 定義 | 箇所 | 関連概念 |
|------|------|------|----------|

### 概念階層
```
[階層図]
```

### 概念間関係
[関係の分析]

### 一貫性チェック
[一貫性の評価]

### 曖昧な概念
[複数の解釈が可能な概念]
```

---

## 論証評価

### 目的

テキストにおける主張とその支持関係を分析し、論証の妥当性を評価する。

### 論証の基本構造

```
        ┌─────────────────────────────────────┐
        │             論証                    │
        │                                     │
        │   ┌───────────┐    ┌───────────┐   │
        │   │  前提1   │    │  前提2   │    │
        │   └─────┬─────┘    └─────┬─────┘   │
        │         │                │         │
        │         └────────┬───────┘         │
        │                  │                 │
        │                  ▼                 │
        │         ┌───────────────┐          │
        │         │   推論規則    │          │
        │         └───────┬───────┘          │
        │                 │                  │
        │                 ▼                  │
        │         ┌───────────────┐          │
        │         │     結論      │          │
        │         └───────────────┘          │
        │                                     │
        └─────────────────────────────────────┘
```

### 論証パターン

#### 1. 演繹（Deduction）

```
前提1: すべてのAはBである
前提2: XはAである
───────────────────────
結論: XはBである

例:
前提1: すべてのユーザーは認証が必要である
前提2: 管理者はユーザーである
結論: 管理者は認証が必要である
```

**評価ポイント**: 前提が真なら結論は必然的に真

#### 2. 帰納（Induction）

```
観察1: A1はBである
観察2: A2はBである
観察3: A3はBである
...
───────────────────────
結論: すべてのAはBである（おそらく）

例:
観察1: 実装Aはバグがあった
観察2: 実装Bはバグがあった
観察3: 実装Cはバグがあった
結論: この手法には問題がある（おそらく）
```

**評価ポイント**: 結論は確率的、反例に弱い

#### 3. 類推（Analogy）

```
XはA, B, Cの性質を持つ
YはA, B, Cの性質を持つ
XはDの性質を持つ
───────────────────────
結論: YもDの性質を持つ（おそらく）

例:
サービスAはマイクロサービスで成功した
サービスBも同様の要件を持つ
サービスAはスケーラブルである
結論: サービスBもマイクロサービスでスケーラブルになる（おそらく）
```

**評価ポイント**: 類似点の関連性、相違点の影響

#### 4. 因果推論（Causal Reasoning）

```
Xが発生するとYが続く（相関）
XとYの間に因果メカニズムがある
他の要因で説明できない
───────────────────────
結論: XはYの原因である

例:
新システム導入後、パフォーマンスが向上した
新システムは処理を最適化している
他の変更はなかった
結論: 新システムがパフォーマンス向上の原因である
```

**評価ポイント**: 相関≠因果、交絡因子

### 論証評価フレームワーク

#### 評価軸

| 軸 | 質問 | 判断基準 |
|----|------|----------|
| **前提の妥当性** | 前提は真か、または受け入れ可能か | 根拠、出典、一般認知 |
| **推論の正当性** | 前提から結論が論理的に導かれるか | 形式的妥当性 |
| **結論の強さ** | 結論はどの程度確実か | 必然的/確率的/仮説的 |
| **完全性** | 重要な前提が欠けていないか | 暗黙の前提の特定 |
| **反例への耐性** | 既知の反例に対応できるか | 反例の検討 |

#### 評価テンプレート

```markdown
## 論証評価

### 論証名: [名称]

**構造**:
- 前提1: [内容] ([箇所])
- 前提2: [内容] ([箇所])
- 推論: [タイプ]
- 結論: [内容] ([箇所])

**形式化**:
```
P1 ∧ P2 → C
```

**評価**:

| 軸 | 評価 | 理由 |
|----|------|------|
| 前提の妥当性 | ○/△/× | |
| 推論の正当性 | ○/△/× | |
| 結論の強さ | 強/中/弱 | |
| 完全性 | ○/△/× | |
| 反例耐性 | ○/△/× | |

**反論**:
- R1: [内容]
- R2: [内容]

**総合評価**: [妥当/条件付き妥当/妥当でない]
```

### よくある論証の誤謬

| 誤謬 | 説明 | 例 |
|------|------|-----|
| **非因果の因果** | 相関を因果と混同 | 「Aの後でBが起きた、だからAがBの原因だ」 |
| **循環論法** | 結論を前提に使う | 「Aは真だ。なぜならAが言っているから」 |
| **人身攻撃** | 主張ではなく人を攻撃 | 「彼の言うことは信じられない、彼は嘘つきだ」 |
| **藁人形** | 相手の主張を歪める | 「彼はAと言ったが、それはBだ」 |
| **訴える権威** | 権威だけで正当化 | 「専門家がそう言ったから正しい」 |
| **急滑り坂** | 極端な結果を予測 | 「Aを認めるとZになる」 |
| **虚假二分法** | 選択肢を不当に限定 | 「AかBかどちらかだ」（Cがあるのに） |
| **後件肯定** | 結果から原因を確定 | 「雨なら濡れる。濡れている。だから雨だ」 |
| **前件否定** | 原因の否定から結果の否定 | 「雨なら濡れる。雨ではない。だから濡れない」 |

---

## 統合的解釈

### 目的

3軸分析の結果を統合し、テキスト全体の一貫した解釈を提示する。

### 統合プロセス

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  構造分析   │    │  概念分析   │    │  論証評価   │
│             │    │             │    │             │
│ ・構成      │    │ ・定義      │    │ ・前提      │
│ ・依存      │    │ ・階層      │    │ ・推論      │
│ ・流れ      │    │ ・関係      │    │ ・結論      │
└──────┬──────┘    └──────┬──────┘    └──────┬──────┘
       │                  │                  │
       └──────────────────┼──────────────────┘
                          │
                          ▼
               ┌─────────────────────┐
               │   クロスチェック     │
               │                     │
               │ ・整合性確認        │
               │ ・矛盾の特定        │
               │ ・補完関係の把握    │
               └──────────┬──────────┘
                          │
                          ▼
               ┌─────────────────────┐
               │   統合的解釈        │
               │                     │
               │ ・核心的主張        │
               │ ・論理的構成        │
               │ ・限界と課題        │
               └─────────────────────┘
```

### 統合的解釈の構成要素

#### 1. 核心的主張

1-2文でテキスト全体の核心を要約する。

```
テンプレート:
「このテキストは、[主題]について、[立場]を主張している。
その根拠は、[主要な論証]である。」
```

#### 2. 論理的構成

```
論理構成図
==========

[問題提起]
    │
    ▼
[分析枠組み] ──提供──> [主張1]
    │                      │
    │                      ▼
    │                  [根拠1]
    │                      │
    │                      ▼
    └────────────────> [主張2]
                           │
                           ▼
                       [結論]
```

#### 3. 限界と課題

```
□ 明示的に扱っていない範囲
□ 想定されている前提
□ 確実性の程度
□ 反論への応答の余地
□ 今後の発展の方向性
```

### 出力テンプレート

```markdown
## 統合的解釈

### 核心的主張
[1-2文での要約]

### 論理的構成
[論理構成図]

### 強み
- [強み1]
- [強み2]

### 限界
- [限界1]
- [限界2]

### 曖昧な点
- [曖昧さ1]
- [曖昧さ2]

### 今後の課題
[さらなる検討が必要な事項]
```

---

## 文書タイプ別ガイド

### 学術論文

**分析の焦点:**
- 研究課題の明確性
- 先行研究との関係
- 方法論の妥当性
- 論証の厳密性
- 結論の根拠

**チェックリスト:**
```
□ 研究課題が明確に定義されている
□ 先行研究が適切にレビューされている
□ 方法論が研究課題に適している
□ データが結論を支持している
□ 限界が認識されている
□ 今後の研究方向が示されている
```

### 技術文書・仕様書

**分析の焦点:**
- 要件の完全性と一意性
- 仕様間の整合性
- 実現可能性
- テスト可能性

**チェックリスト:**
```
□ 要件が一意に解釈可能
□ 要件間に矛盾がない
□ 前提条件が明示されている
□ 例外処理が定義されている
□ 受け入れ基準が明確
□ トレーサビリティがある
```

### 契約書・法的文書

**分析の焦点:**
- 条項間の整合性
- 定義の一貫性
- 解釈の一意性
- 権利義務の明確性

**チェックリスト:**
```
□ 用語が定義され、一貫して使用されている
□ 条項間に矛盾がない
□ 権利と義務が明確
□ 例外と条件が明示されている
□ 紛争解決条項がある
□ 解約・終了条件が明確
```

### ビジネス文書・提案書

**分析の焦点:**
- 目的の明確性
- 根拠の妥当性
- 実現可能性
- リスク認識

**チェックリスト:**
```
□ 目的が明確
□ 根拠が提示されている
□ 代替案との比較がある
□ リスクが認識されている
□ 成功基準が定義されている
□ 実行計画が具体的
```

### 政策文書

**分析の焦点:**
- 政策目標の明確性
- 因果関係の妥当性
- 実現可能性
- 副次的影響

**チェックリスト:**
```
□ 政策目標が明確
□ 現状分析が適切
□ 因果関係が論証されている
□ 代替案が検討されている
□ 費用便益が分析されている
□ 実施体制が明確
□ 評価指標がある
```

---

## 分析テンプレート

### 完全分析テンプレート

```markdown
# [テキスト名] 論理的分析レポート

## メタ情報
- 分析日: [日付]
- 分析者: [名前]
- 文書タイプ: [タイプ]
- 分析範囲: [範囲]

---

## 実行サマリー

### 一行要約
[テキストの核心を1文で]

### 主な発見
1. [発見1]
2. [発見2]
3. [発見3]

### 推奨事項
1. [推奨1]
2. [推奨2]

---

## 1. 構造分析

### 1.1 全体構成
[構成の概要]

### 1.2 構造ツリー
```
[ツリー]
```

### 1.3 依存関係
[依存関係の説明]

### 1.4 論理の流れ
[論理フローの説明]

---

## 2. 概念分析

### 2.1 主要概念一覧

| 概念 | 定義 | 箇所 | 関連 |
|------|------|------|------|

### 2.2 概念階層
```
[階層図]
```

### 2.3 概念間関係
[関係の分析]

### 2.4 曖昧な概念
[複数解釈可能な概念]

---

## 3. 論証評価

### 3.1 主要論証一覧

| 論証 | タイプ | 前提 | 結論 | 妥当性 |
|------|--------|------|------|--------|

### 3.2 論証詳細

#### 論証1: [名称]
- **前提**: ...
- **推論**: ...
- **結論**: ...
- **評価**: ...
- **反論**: ...

---

## 4. 統合的解釈

### 4.1 核心的主張
[要約]

### 4.2 論理的構成
[構成図]

### 4.3 強み
- ...

### 4.4 限界
- ...

### 4.5 矛盾・不整合
[検出された問題]

---

## 5. 品質評価

### 5.1 全体評価

| 観点 | 評価 | コメント |
|------|------|----------|
| 構造の明確さ | ★★★☆☆ | |
| 概念の一貫性 | ★★★☆☆ | |
| 論証の妥当性 | ★★★☆☆ | |
| 全体の説得力 | ★★★☆☆ | |

### 5.2 改善提案
1. ...
2. ...

---

## 付録

### A. 用語集
[抽出された用語一覧]

### B. 参照箇所一覧
[重要箇所のリスト]

### C. 分析メモ
[詳細な分析メモ]
```

---

## 参考文献

### 論理学・批判的思考

- Copi, I.M. & Cohen, C. (2019). *Introduction to Logic*. 15th ed.
- Fisher, A. (2011). *Critical Thinking: An Introduction*. 2nd ed.
- Toulmin, S. (2003). *The Uses of Argument*. Updated ed.
- Walton, D. (2006). *Fundamentals of Critical Argumentation*.

### 文書分析

- Booth, W.C. et al. (2016). *The Craft of Research*. 4th ed.
- Williams, J.M. & Bizup, J. (2016). *Style: Lessons in Clarity and Grace*. 12th ed.

### 要件定義・仕様書

- Robertson, S. & Robertson, J. (2012). *Mastering the Requirements Process*. 3rd ed.
- Wiegers, K. & Beatty, J. (2013). *Software Requirements*. 3rd ed.

---

*このスキルは汎用的な論理的テキスト分析フレームワークとして設計されています。*
*特定分野への適用時は、分野固有の規約や用語法を考慮してください。*

---

## デバッグ情報

### 記録されるイベント

このスキルの実行時に記録されるイベント：

| イベント種別 | 説明 | 記録タイミング |
|-------------|------|---------------|
| session_start | セッション開始 | pi起動時 |
| task_start | タスク開始 | ユーザー依頼受付時 |
| operation_start | 操作開始 | スキル実行開始時 |
| operation_end | 操作終了 | スキル実行完了時 |
| task_end | タスク終了 | タスク完了時 |

### ログ確認方法

```bash
# 今日のログを確認
cat .pi/logs/events-$(date +%Y-%m-%d).jsonl | jq .

# 特定の操作を検索
cat .pi/logs/events-*.jsonl | jq 'select(.eventType == "operation_start")'

# エラーを検索
cat .pi/logs/events-*.jsonl | jq 'select(.data.status == "failure")'
```

### トラブルシューティング

| 症状 | 考えられる原因 | 確認方法 | 解決策 |
|------|---------------|---------|--------|
| 実行が停止する | タイムアウト | ログのdurationMsを確認 | タイムアウト設定を増やす |
| 結果が期待と異なる | 入力パラメータの問題 | paramsを確認 | 入力を修正して再実行 |
| エラーが発生する | リソース不足 | エラーメッセージを確認 | 設定を調整 |

### 関連ファイル

- 実装: `.pi/extensions/logical-analysis.ts`
- ログ: `.pi/logs/events-YYYY-MM-DD.jsonl`
